<?php defined('SYSPATH') or die('No direct script access.');class Controller_Site_Product extends Controller_Site{    public function action_index()    {        $prod_url = $this->param('product');		$this->set_metatags_and_content($prod_url, 'product');		$reviews = ORM::factory('Reviews')->getReviewsByProdId($this->_model->id);		$reviews_count = ORM::factory('Reviews')->countReviewsByProdId($this->_model->id);		$rating = ORM::factory('Reviews')->countRatingByProdId($this->_model->id);        $related = ORM::factory('Product')->fetchProdRelated($this->_model->category, $this->_model->id);		Cookie::set("products[{$this->_model->id}]", true);        $PDO = ORM::factory('Product')->PDO();        $color = $PDO->query("SELECT color FROM product WHERE id = '{$this->_model->id}'")->fetch(PDO::FETCH_ASSOC);        $volume_test = $PDO->query("SELECT volume, id, price, new_price, article FROM product WHERE parent_product = '{$this->_model->id}' OR id = '{$this->_model->id}'")->fetchAll(PDO::FETCH_ASSOC);        $volume_prod = ORM::factory('Product')->fetchProdVolume($this->_model->id)->as_array();        $this->template->volume_test = $volume_test;        $this->template->volume_prod = $volume_prod;		$this->template->rating = $rating;		$this->template->reviews_count = $reviews_count;		$this->template->reviews = $reviews;		$this->template->brand = $this->_model->brand;		$this->template->category = $this->_model->category;		$this->template->colors =  $color['color'];		$this->template->related =  $related;		$this->template->set_layout('layout/site/global');		$this->template->s_title = $this->_model->name . ' - купить ' . $this->template->category->name . ' в Минске в интернет магазине cosm.by: лучшие цены, большой каталог, отзывы';    }}